
1)Я хочу написать сайт с применением fastAPI
Сайт должен иметь форму заргузки файла, которая будет проверять два JSON файла, пользовательские и тот который будет лежать в отдельной папке.

Этот сайт будет частью учебного курса по JSON,
Я планирую давать своим ученикам задачи по созданию json файлов от простых до сложных, а для проверки их файлом мне нужнен сайт который я хочу разместить на сервере.

Сайт должен проверить оба файла, вывести отличия файлов, вывести рекомендации по изменению пользовательского файла, а если файлы идентичны, сайт должен вывести секретный код, которые нужно будет вставить в образовательную платформу.



Нужно внести следующие правки:
1)удалить раздел Администрирование, вместо этого все то что происходит в этом разделе, должна происходит на главной странице


2) файл для Эталонный файл: не должен выбираться из меню пользователя, он должен лежить в папке reference_json и называться example.json, и именно с этим файлом должно происходит сравнение

3) Ход действий пользователя.
	1) Открыть сайт
	2) Выбрать свой файл 
	3) нажать кнопку проверить
	4) Если файлы совпадает, то получить секретный код
	5) Если файлы не совпадают, то пользователь должен увидеть разбор его ошибок, с подсветкой синтаксиса и его ошибок с рекомендациями по исправлению


Нужно внести следующие правки:
	1) Удалить раздел для "Загрузка эталонного файла (для преподавателя)" потому что я планирую вручную добавлять в папку reference_json необходимый json, пользователь не должен видеть эту настройку
	2) Размер рабочей области не должен превышать 800px по ширине
	3) в разделах "Найденные различия:" и "Рекомендации по исправлению:" сделай подстветку строк а не контейнера.
	4) Для кода в card-body json-container сделай стиль кода 


Удали подсветку строк в контейнере class="card-body"
Подсвети только слова где ошибка, например:


'''Разные значения для name: ожидается Пример задания, получено 1Пример задания
Разные значения для tasks[1].title: ожидается Добавьте массив, получено 1Добавьте массив
Разные значения для metadata.author: ожидается Преподаватель, получено 1Преподаватель'''

тут нужно подсветить только места где ошибки 
	-1Пример
	- tasks[1].title
	-metadata.author
	-Преподаватель
	-1Преподаватель

ошибочные значения подсветить красным, а предлагаемые зелёным




насколько корректно писать слово "значение", не корректнее ли написать значение ключа или что то подобное?


Рекомендации по исправлению:

    Измените значение name на Пример задания
    Измените значение tasks[1].title на Добавьте массив
    Измените значение metadata.author на Преподаватель



Внеси следующие изменения

1) Я хочу чтобы ты отображал данные в "Найденные различия:" подобно тому как github отображает изменения в строках. Добавь номера строк в разделе "Найденные различия:
"
2) в контейнерах "Ваш JSON" "Эталонный JSON " запреты копирование любым образом, и пронумерй строки в двух этих контейнерах

Добавь номера строк в файлах, для разделов  "Найденные различия: и  "Рекомендации по исправлению:"

3) Сделай так, если в разделах "Найденные различия: и "Рекомендации по исправлению:" более 5 ошибок, появлялась кнопка для раскрытия следующих 5 ошибок.

4) Сделай для каждого раздела максимум информативности, чтобы пользователю легче было искать свои ошибки 

добавь в раздел "Ваш JSON" чтобы проблемные строк подсвечивались

добавь ещё нумерация строк в раздел Ваш JSON и Эталонный JSON




исправь код, если в разделах "Найденные различия: и "Рекомендации по исправлению:" более 5 ошибок, появлялась кнопка для раскрытия следующих 5 ошибок.

Сделай для каждого раздела максимум информативности, чтобы пользователю легче было искать свои ошибки в своих json файлах

добавь развёртывания объекта json в разделе "Найденные различия:"
Например, если кликнуть на + или - можно развернуть тот объект json в котором ошибка(-), или эталонный объект json(+)
Разные значения для [0].title:
-Test API- endpoints
+Test API endpoints


Почти хорошо

сейчас ты добавил новые ссылка для развёртывания, 

Разные значения для [0].title:
Показать/скрыть контекст вашего JSON
Показать/скрыть контекст эталонного JSON
Test API- endpoints
Test API endpoints

но необходимол сделать чтобы объект json разворачивался при клике на 
class="diff-content" Test API- endpoints
class="diff-content" Test API endpoints



сдеай контейнер class="json-preview json-preview-removed" более информативным.
в нём необходимо показать не просто строку, а весь объект json, весь словарь
    {
        "id": 1,
        "title": "Test API- endpoints",
        "description": "Task to fix bug in security features",
        "status": "completed",
        "priority": "high",
        "created_at": "2025-02-28T16:00:00Z",
        "updated_at": "2025-03-15T16:00:00Z"
    },

то же самое для ошибки и эталона
    {
        "id": 1,
        "title": "Test API endpoints",
        "description": "Task to fix bug in security features",
        "status": "completed",
        "priority": "high",
        "created_at": "2025-02-28T16:00:00Z",
        "updated_at": "2025-03-15T16:00:00Z"
    },

обязательно подсвети ошибочную строку




Хорошо, но в class="json-preview json-preview-removed" я вижу полное содержимое файла пользователя, а туда необходимо вывести только тот объект, который указан в заголовке "Разные значения для [0].title:" которй находится в error-path


почему пустая строка в ? <div class="path-context">Путь: [0].title</div>
                                [
]
                            






убери пустые строки над и под текстом "Путь: [N].title"
в контейнере 

<div class="path-context">Путь: [0].title</div>
<span class="error-line">{
  "id": 1,
  "title": "Test API- endpoints",
  "description": "Task to fix bug in security features",
  "status": "completed",
  "priority": "high",
  "created_at": "2025-02-28T16:00:00Z",
  "updated_at": "2025-03-15T16:00:00Z"
}</span>





Кнопка <div class="show-more-btn" id="show-more-differences">Показать еще различия (34) </div> должны раскрывать по 5 элементов



1) уменьши отсуп внутри контейнеров card-body json-container для текста, сейчал слева слишком много свободного пространства(см изображение)
2) ДОбавь в  card-body json-container нумерация строк как это реализовано в текстовых редакторах



Добавь в контейнер class="error-line" подсвечивание строки с ошибкой
например для  Путь: [0].title нужно подсветить строку "title": "Test API- endpoints", 
в объекте json
{
  "id": 1,
  "title": "Test API- endpoints",
  "description": "Task to fix bug in security features",
  "status": "completed",
  "priority": "high",
  "created_at": "2025-02-28T16:00:00Z",
  "updated_at": "2025-03-15T16:00:00Z"
}

Важно!
НЕ СОЗДАВАЙ НОВЫЙ APP, И ИЗМЕНИ СУЩЕСТВУЮЩИЙ

Сейчас в приложении есть один эндпоинт /validate, но я хочу добавлять любое количество эндпоинтов, например http://localhost:8000/N (где N это любое целое или вещественное значение), 
моя цель создать курс по отработке навыков json файлами у своих студентов, мне необходимо обрабатывать json файлы следующим образом.

Например я создаю 100 папок(в заранее определённом каталоге), от 1.01 до 100.01, например, в каждой папке будет лежать эталонный json, и когда я перехожу например на http://localhost:8000/51, должна открыться страница с проверкой фыайла именно для 51 папке и файла в нём.

используй путь к папкам JSON Course/json_tasks

Но я не знаю точно сколько будет файлов, возможно и 30.01, код должен уметь динамически определять сколько создано папок и уметь с ними работать.

Возможно тебе придется создать новую отдельную папку, сделай этой и дай инструкцию по работе



--------------------

Давай изменим основной эндпоинт @app.get("/",,) он должен динамически получать 
в папке reference_json есть ещё папки, от 1.01 до 1.99 каждая папка содержит корректны json  и называет good.json
необходимо внести такие изменения, чтобы я мог открыть например http://127.0.0.1:8000/1.01 и чтобы приложение проверила пользовательский json именно с тем что лежит в папке 1.01 и или для сайта http://127.0.0.1:8000/1.20 проверка должна осуществлятся для файла good.json в папке 1.20

для этого проанализируй все папки и файлы проекта и используй то что есть.

Главная страница http://127.0.0.1:8000/N визуально не должна отличаться от остальных кроме заголовка на странице

Если есть вопросы то задай их, я отвечу


-------------

Сейчас я вижу что код показывает только разность одной строки, а необходимо добавить разность всех строк если такая имеется, я имею ввиду подсветка разности


например тут подсвечивается только первая строка 
Разные значения для [0].id:
* Нажмите на строку ниже, чтобы увидеть контекст ошибки
8335

                                Путь: [0].id

                                

{
  "id": 8335,
  "name": "Видеокарта NVIDIA RTX 3060",
  "manufacturer": "Kingston",
  "category": "Память",
  "price": 142173.76,
  "quantity": 54,
  "specifications": {
    "power": "599W",
    "warranty": "34 месяцев",
    "year": 2024
  },
  "is_available": false,
  "invalid_field": "некорректные данные"
}


                            
4375

                                Путь: [0].id

                                

{
  "id": 4375,
  "name": "Термопаста Arctic Silver",
  "manufacturer": "AMD",
  "category": "Видеокарты",
  "price": 114053.89,
  "quantity": 39,
  "specifications": {
    "power": "334W",
    "year": 2020
  },
  "is_available": true
}


